<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>CSS 视觉格式化模型 Visual Formatting Model | 小牛写代码的地方</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="What’s CSS Visual Formatting Model 视觉格式化模型(visual formatting model)是用来处理文档并将它显示在视觉媒体上的机制。 根据CSS盒模型，浏览器为文档元素生成盒子(Box)。视觉格式化模型就是文档里的“盒子布局呈现的一种规则”。  Basic Concepts in CSS specificationThe “Box” in the s">
<meta property="og:type" content="article">
<meta property="og:title" content="CSS 视觉格式化模型 Visual Formatting Model">
<meta property="og:url" content="http://example.com/2018/02/18/CSS-%E8%A7%86%E8%A7%89%E6%A0%BC%E5%BC%8F%E5%8C%96%E6%A8%A1%E5%9E%8B-Visual-Formatting-Model/index.html">
<meta property="og:site_name" content="小牛写代码的地方">
<meta property="og:description" content="What’s CSS Visual Formatting Model 视觉格式化模型(visual formatting model)是用来处理文档并将它显示在视觉媒体上的机制。 根据CSS盒模型，浏览器为文档元素生成盒子(Box)。视觉格式化模型就是文档里的“盒子布局呈现的一种规则”。  Basic Concepts in CSS specificationThe “Box” in the s">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://newbbs.bingyan.net/photo/2018/7e8f35beff7b07022095b9bc4b634416.png">
<meta property="og:image" content="https://newbbs.bingyan.net/photo/2018/2766dbbad7cb2b9d773b5e699f53f450.png">
<meta property="og:image" content="https://newbbs.bingyan.net/photo/2018/18918e6b5fc9dc6a2b2d5eb515f3c251.png">
<meta property="og:image" content="https://newbbs.bingyan.net/photo/2018/50571bc1ec99df9e1fea0f0b780c4321.png">
<meta property="og:image" content="https://newbbs.bingyan.net/photo/2018/73e9c8e631156c77f4e9b4b0f1331041.png">
<meta property="og:image" content="https://newbbs.bingyan.net/photo/2018/f67abd5d7a768c10b3b57bb2d24d207a.png">
<meta property="og:image" content="https://newbbs.bingyan.net/photo/2018/4ef4f442d3e2a9f436e9fc6d9d92230a.png">
<meta property="og:image" content="https://newbbs.bingyan.net/photo/2018/4f07d3e67edf70f09ba92c1b687080d8.png">
<meta property="og:image" content="https://newbbs.bingyan.net/photo/2018/65c91d27b6b5bee5ae574f2f4fd3fca4.png">
<meta property="article:published_time" content="2018-02-18T04:52:09.000Z">
<meta property="article:modified_time" content="2021-03-03T05:54:01.725Z">
<meta property="article:author" content="Cattle">
<meta property="article:tag" content="CSS">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://newbbs.bingyan.net/photo/2018/7e8f35beff7b07022095b9bc4b634416.png">
  
    <link rel="alternate" href="/atom.xml" title="小牛写代码的地方" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">小牛写代码的地方</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Code is Poetry</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS 订阅"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-CSS-视觉格式化模型-Visual-Formatting-Model" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/02/18/CSS-%E8%A7%86%E8%A7%89%E6%A0%BC%E5%BC%8F%E5%8C%96%E6%A8%A1%E5%9E%8B-Visual-Formatting-Model/" class="article-date">
  <time class="dt-published" datetime="2018-02-18T04:52:09.000Z" itemprop="datePublished">2018-02-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      CSS 视觉格式化模型 Visual Formatting Model
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="https://newbbs.bingyan.net/photo/2018/7e8f35beff7b07022095b9bc4b634416.png"><br><img src="https://newbbs.bingyan.net/photo/2018/7e8f35beff7b07022095b9bc4b634416.png" alt="img"></a></p>
<h1 id="What’s-CSS-Visual-Formatting-Model"><a href="#What’s-CSS-Visual-Formatting-Model" class="headerlink" title="What’s CSS Visual Formatting Model"></a>What’s CSS Visual Formatting Model</h1><ul>
<li>视觉格式化模型(visual formatting model)是用来处理文档并将它显示在视觉媒体上的机制。</li>
<li>根据CSS盒模型，浏览器为文档元素生成盒子(Box)。视觉格式化模型就是文档里的“盒子布局呈现的一种规则”。</li>
</ul>
<h1 id="Basic-Concepts-in-CSS-specification"><a href="#Basic-Concepts-in-CSS-specification" class="headerlink" title="Basic Concepts in CSS specification"></a>Basic Concepts in CSS specification</h1><h3 id="The-“Box”-in-the-sight-of-W3C"><a href="#The-“Box”-in-the-sight-of-W3C" class="headerlink" title="The “Box” in the sight of W3C"></a>The “Box” in the sight of W3C</h3><p>各位至少对CSS盒模型有所耳闻吧？CSS盒子（Box）是由 CSS 引擎根据文档中的内容所创建，用于文档元素的定位、布局和格式化等的布局单位。</p>
<blockquote>
<p><strong>Q: 一个元素 等于 一个盒子 ？</strong></p>
<p>A: 我都这么问了，答案肯定是否定的。反例：</p>
<ol>
<li><code>&lt;li&gt;</code> 元素，除了标签内容之外，前面的项目符号也生成了一个盒子。</li>
<li>跨行的行内元素（例如 大段的文本）。分布在不同行的部分分别属于不同的盒子。</li>
</ol>
</blockquote>
<h3 id="Overview-Block-Inline-and-Boxes"><a href="#Overview-Block-Inline-and-Boxes" class="headerlink" title="Overview: Block , Inline and Boxes"></a>Overview: Block , Inline and Boxes</h3><p>很多概念你可以分得清吗？</p>
<p><a target="_blank" rel="noopener" href="https://newbbs.bingyan.net/photo/2018/2766dbbad7cb2b9d773b5e699f53f450.png"><img src="https://newbbs.bingyan.net/photo/2018/2766dbbad7cb2b9d773b5e699f53f450.png" alt="img"></a></p>
<p><strong>术语表：*见文末*。</strong></p>
<ul>
<li>块盒(Block Box)：既是块级盒(Block Level Box) 也是 块容器盒(Block Container Box) 的盒子。</li>
<li>包含块(containing block): 包含其他盒子的块称为包含块。</li>
</ul>
<h3 id="块级盒子-Block-Level-Box"><a href="#块级盒子-Block-Level-Box" class="headerlink" title="块级盒子 // Block-Level Box"></a>块级盒子 // Block-Level Box</h3><p><strong>当元素的 display为block、list-item或table时，该元素将成为块级元素。</strong> 块级盒子参与块级格式化上下文。块级盒子描述元素与其父元素和兄弟元素之间的行为。块容器盒子描述了元素跟其后代之间的行为（例如，子元素相对父元素进行定位）。</p>
<ul>
<li><strong>有些块级盒子并不是块容器盒子。</strong> 比如表格，表格的单元格明显不是块级嘛，但是它还是可以包含div等块级的盒子。其实表格内部是“表格格式化上下文”。</li>
<li><strong>有些块容器盒子也不是块级盒子</strong> 。如非替换行内级块和非替换表格单元格。（下文有具体的例子）。</li>
</ul>
<blockquote>
<p><strong>Q: 什么是替换元素？</strong></p>
<p>替换元素就是浏览器根据元素的标签和属性，来决定元素的具体显示内容。比如<code>img</code>元素通过<code>src</code>属性的值来读取图片信息并显示出来，而 HTML 代码里没有图片的实际内容；又例如 <code>input</code> 元素的 <code>type</code> 属性决定是显示输入框，还是单选按钮等。<br><code>html&lt;img src=&quot;girl.jpg&quot;/&gt; &lt;input type=&quot;submit&quot; name=&quot;submit&quot; value=&quot;提交&quot;/&gt;</code></p>
<p>HTML 的大多数元素是非替换元素，即浏览器直接渲染HTML标签内的内容。 例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;p的内容&lt;&#x2F;p&gt;</span><br><span class="line">&lt;em&gt;label的内容&lt;&#x2F;em&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<p>## </p>
<blockquote>
<p><strong>Q: “块级元素” 对应一个 “块级盒子”?</strong></p>
<p>A: 不一定。大多数块级元素都仅会生成一个块级盒子。但有的块级元素 <code>&lt;li&gt;</code>可能会生成更多盒子。</p>
</blockquote>
<h3 id="行内级盒子-Inline-Level-Box"><a href="#行内级盒子-Inline-Level-Box" class="headerlink" title="行内级盒子 // Inline-Level Box"></a>行内级盒子 // Inline-Level Box</h3><p>行内级元素是 <code>display</code> 属性为 <code>inline-*</code> 的元素和其他默认行内的元素。</p>
<p>行内级元素会生成行内级盒子，参与行内格式化上下文（IFC）。</p>
<blockquote>
<p><strong>Q：“原子”可以再分吗？</strong>或者说 生成 “原子行内级盒子” 的元素 可以拥有子元素吗？</p>
</blockquote>
<h3 id="行内级盒子-vs-行内盒子-vs-原子行内级盒子"><a href="#行内级盒子-vs-行内盒子-vs-原子行内级盒子" class="headerlink" title="行内级盒子 vs. 行内盒子 vs. 原子行内级盒子"></a>行内级盒子 vs. 行内盒子 vs. 原子行内级盒子</h3><p>傻傻分不清。<strong>“行内级盒子” 分为 “行内盒” 与 “原子行内级盒” 两种。 注意概念区分与包含关系</strong> 。</p>
<p><a target="_blank" rel="noopener" href="https://newbbs.bingyan.net/photo/2018/18918e6b5fc9dc6a2b2d5eb515f3c251.png"><img src="https://newbbs.bingyan.net/photo/2018/18918e6b5fc9dc6a2b2d5eb515f3c251.png" alt="img"></a></p>
<h4 id="行内盒子-Inline-Box"><a href="#行内盒子-Inline-Box" class="headerlink" title="行内盒子 // Inline-Box"></a>行内盒子 // Inline-Box</h4><p>其内容会参与创建其容器的行内格式化上下文。可以被拆分成多个盒子然后放置在包含它的盒子里。</p>
<p>例如：<code>display: inline</code></p>
<p>下面这张图片里，蓝色字包含在<code>&lt;em&gt;</code>里面。而这个标签拆成了三个块，和包含它的盒子的行内盒子“融为一体”，也就是所谓的<code>“参与创建其容器的行内格式化上下文”</code>。</p>
<p>（下图的绿色虚线框使用<code>CSS outline 属性</code>生成。印证了“生成三个盒子”的说法。）</p>
<p><a target="_blank" rel="noopener" href="https://newbbs.bingyan.net/photo/2018/50571bc1ec99df9e1fea0f0b780c4321.png"><img src="https://newbbs.bingyan.net/photo/2018/50571bc1ec99df9e1fea0f0b780c4321.png" alt="img"></a></p>
<h4 id="原子行内级盒子-Atomic-Inline-Level-Box"><a href="#原子行内级盒子-Atomic-Inline-Level-Box" class="headerlink" title="原子行内级盒子 // Atomic Inline-Level Box"></a>原子行内级盒子 // Atomic Inline-Level Box</h4><p>内容不参与行内格式化上下文的创建，像原子一样不可再拆成多个盒子。</p>
<p>例子： 替换行内级元素（例<code>&lt;img /&gt;</code>）、<code>display: inline-block</code>、<code>inline-table</code>。</p>
<p>下图的<code>&lt;em&gt;</code>被添加了<code>inline-block</code>，成为原子行内级元素。它自成”独立王国“，其内容 <em>不会</em> 参与其容器盒子的格式化上下文。</p>
<p><a target="_blank" rel="noopener" href="https://newbbs.bingyan.net/photo/2018/73e9c8e631156c77f4e9b4b0f1331041.png"><img src="https://newbbs.bingyan.net/photo/2018/73e9c8e631156c77f4e9b4b0f1331041.png" alt="img"></a></p>
<h4 id="原子行内级盒的排布"><a href="#原子行内级盒的排布" class="headerlink" title="原子行内级盒的排布"></a>原子行内级盒的排布</h4><p>原子行内盒在行内格式化上下文里 <strong>不能拆成多个盒子</strong> 。</p>
<p>默认情况下，如果一行的剩余空间容不下，那就去新开一行；如果新开的一行也容不下，那就算溢出容器也不让拆成多个盒子。</p>
<p><strong>单个汉字 / 单个英文单词 就是一个自然的原子行内级盒</strong> 。当然，一些CSS属性会改变对“原子”的判定，例如 <code>word-break: break-all</code>。见下图。</p>
<p><a target="_blank" rel="noopener" href="https://newbbs.bingyan.net/photo/2018/f67abd5d7a768c10b3b57bb2d24d207a.png"><img src="https://newbbs.bingyan.net/photo/2018/f67abd5d7a768c10b3b57bb2d24d207a.png" alt="img"></a></p>
<blockquote>
<p><strong>Q：“原子”可以再分吗？</strong>或者说 生成 “原子行内级盒子” 的元素 可以拥有子元素吗？</p>
<p>A: 可以包含子元素。<code>display: inline-block</code>的元素会生成原子行内级盒子，也可以包含子元素。</p>
</blockquote>
<h3 id="题外话：Line-Box-行盒-是什么"><a href="#题外话：Line-Box-行盒-是什么" class="headerlink" title="题外话：Line-Box 行盒 是什么"></a>题外话：Line-Box 行盒 是什么</h3><p>行盒（Line Box, 也叫行框）是由行内格式化上下文(IFC)产生的盒，用于表示一行。在块盒里面，行盒从块盒一边排版到另一边（从左右浮动元素边缘开始计）。</p>
<p><em>一般我们 CSS 布局时不需关注。这和我们上文讨论的概念没有直接的联系。</em></p>
<h3 id="没有盒子也要强行加盒子——匿名盒子"><a href="#没有盒子也要强行加盒子——匿名盒子" class="headerlink" title="没有盒子也要强行加盒子——匿名盒子"></a>没有盒子也要强行加盒子——匿名盒子</h3><p>在某些情况下进行视觉格式化时，需要添加一些增补性的盒子，这些盒子 <strong>不能</strong> 用CSS选择符选中，称为 <strong>匿名盒子（anonymous boxes）</strong> 。</p>
<p>不能被 CSS 选择符选中意味着不能用样式表添加样式。不过，它们的样式表现可以这样理解：<br>🔸可继承的 CSS 属性值都为 <code>inherit</code><br>🔸不可继承的 CSS 属性值都为 <code>initial</code></p>
<p><a target="_blank" rel="noopener" href="https://newbbs.bingyan.net/photo/2018/4ef4f442d3e2a9f436e9fc6d9d92230a.png"><img src="https://newbbs.bingyan.net/photo/2018/4ef4f442d3e2a9f436e9fc6d9d92230a.png" alt="img"></a></p>
<p>上图含有了两个匿名块盒子，下图显示了两个匿名行内盒子。</p>
<h1 id="Various-“Formatting-Contexts”"><a href="#Various-“Formatting-Contexts”" class="headerlink" title="Various “Formatting Contexts”"></a>Various “Formatting Contexts”</h1><h3 id="What’s-Formatting-Context"><a href="#What’s-Formatting-Context" class="headerlink" title="What’s Formatting Context"></a>What’s Formatting Context</h3><p>“格式化上下文”…… 什么叫“上下文”，真是一个蹩脚的翻译！</p>
<p>我的理解：每种 <em>环境(context)</em> 各自对应着盒模型格式化的一套 <em>规则(layout)</em></p>
<blockquote>
<p>Boxes in the normal flow belong to a formatting context</p>
<p>正常流中的盒子属于某一个格式化上下文。</p>
<p>正常流：文档流，非绝对定位的盒子在其中。</p>
</blockquote>
<p>下面是几种FC：</p>
<p><a target="_blank" rel="noopener" href="https://newbbs.bingyan.net/photo/2018/4f07d3e67edf70f09ba92c1b687080d8.png"><img src="https://newbbs.bingyan.net/photo/2018/4f07d3e67edf70f09ba92c1b687080d8.png" alt="img"></a></p>
<h3 id="BFC"><a href="#BFC" class="headerlink" title="BFC"></a>BFC</h3><h4 id="产生条件"><a href="#产生条件" class="headerlink" title="产生条件"></a>产生条件</h4><ol>
<li><u>根元素</u>或其它包含它的元素</li>
<li>浮动<code>float: left/right/inherit</code></li>
<li>绝对定位<code>position: absolute/fixed</code></li>
<li>行内块<code>display: inline-block</code></li>
<li>表格单元格<code>display: table-cell</code></li>
<li>表格标题<code>display: table-caption</code></li>
<li>溢出元素 <code>overflow: hidden/scroll/auto/inherit</code>（“浮动坍塌”的快捷解决方案之一）</li>
</ol>
<h4 id="布局规则"><a href="#布局规则" class="headerlink" title="布局规则"></a>布局规则</h4><ul>
<li>内部的Box会在垂直方向，一个接一个地放置。</li>
<li>Box垂直方向的距离由margin决定。属于同一个BFC的两个相邻Box的margin会发生重叠。</li>
<li>每个元素的marginbox的左边，与包含块borderbox的左边相接触。即使存在浮动也是如此。</li>
<li><strong>BFC的区域不会与float box重叠</strong> 。</li>
<li>BFC就是页面上的一个隔离的独立容器， <strong>容器里面的子元素不会影响到外面的元素</strong> 。反之也如此。</li>
<li><strong>计算BFC的高度时，浮动元素也参与计算</strong> 。</li>
</ul>
<h4 id="实用层面"><a href="#实用层面" class="headerlink" title="实用层面"></a>实用层面</h4><ul>
<li>浮动区域不叠加到BFC区域上</li>
<li>防止与浮动元素重叠</li>
<li>防止margin合并</li>
<li>float高度塌陷</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://newbbs.bingyan.net/photo/2018/65c91d27b6b5bee5ae574f2f4fd3fca4.png"><img src="https://newbbs.bingyan.net/photo/2018/65c91d27b6b5bee5ae574f2f4fd3fca4.png" alt="img"></a></p>
<h4 id="Related-Demos"><a href="#Related-Demos" class="headerlink" title="Related Demos"></a>Related Demos</h4><p>防止与浮动元素重叠 | <a target="_blank" rel="noopener" href="https://codepen.io/SitePoint/pen/xGpMRP">https://codepen.io/SitePoint/pen/xGpMRP</a></p>
<p>margin collapse | <a target="_blank" rel="noopener" href="https://codepen.io/SitePoint/pen/XbVOXp">https://codepen.io/SitePoint/pen/XbVOXp</a></p>
<p>自己写一个 | <a target="_blank" rel="noopener" href="https://codepen.io/xuxinhang/pen/QmXEWz">https://codepen.io/xuxinhang/pen/QmXEWz</a></p>
<h3 id="IFC"><a href="#IFC" class="headerlink" title="IFC"></a>IFC</h3><h4 id="触发条件"><a href="#触发条件" class="headerlink" title="触发条件"></a>触发条件</h4><p>一个块级元素中 <strong>仅</strong> 包含内联级别元素。</p>
<p>所以如果还包含块级盒子那内部是BFC。（参见 ”匿名盒子“小节 的例子。）</p>
<h4 id="布局规则-1"><a href="#布局规则-1" class="headerlink" title="布局规则"></a>布局规则</h4><ul>
<li>内部的盒子会在水平方向，一个接一个地放置。</li>
<li>这些盒子垂直方向的起点从包含块盒子的顶部开始。</li>
<li>摆放这些盒子的时候，它们在水平方向上的 padding、border、margin 所占用的空间都会被考虑在内。</li>
<li>在垂直方向上，这些框可能会以不同形式来对齐（vertical-align）：它们可能会使用底部或顶部对齐，也可能通过其内部的文本基线（baseline）对齐。</li>
<li>能把在一行上的框都完全包含进去的一个矩形区域，被称为该行的 <strong>行框（line box）</strong>。 <strong>行框的宽度是由包含块（containing box）和存在的浮动来决定</strong> 。</li>
<li>IFC中的 line box 一般左右边都贴紧其包含块，但是会因为float元素的存在发生变化。float 元素会位于IFC与与 line box 之间，使得 line box 宽度缩短。</li>
<li>IFC 中的 line box 高度由 CSS 行高计算规则来确定，同个 IFC 下的多个 line box 高度可能会不同（比如一行包含了较高的图片，而另一行只有文本）</li>
<li>当 inline-level boxes 的总宽度少于包含它们的 line box 时，其水平渲染规则由 text-align 属性来确定，如果取值为 justify，那么浏览器会对 inline-boxes（注意不是inline-table 和 inline-block boxes）中的文字和空格做出拉伸。</li>
<li><strong>【敲黑板】</strong> <em>当一个 inline box 超过 line box 的宽度时，它会被分割成多个boxes，这些 boxes 被分布在多个 line box 里。如果一个 inline box 不能被分割（比如只包含单个字符，或 word-breaking 机制被禁用，或该行内框受 white-space 属性值为 nowrap 或 pre 的影响），那么这个 inline box 将溢出这个 line box。</em></li>
</ul>
<h4 id="实用"><a href="#实用" class="headerlink" title="实用"></a>实用</h4><ul>
<li>水平居中：当一个块要在环境中水平居中时，设置其为 inline-block 则会在外层产生 IFC，通过设置父容器 text-align:center 则可以使其水平居中。</li>
<li>垂直居中：创建一个IFC，用其中一个元素撑开父元素的高度，然后设置其 vertical-align:middle，其他行内元素则可以在此父元素下垂直居中。</li>
</ul>
<h3 id="FFC"><a href="#FFC" class="headerlink" title="FFC"></a>FFC</h3><h4 id="触发条件-1"><a href="#触发条件-1" class="headerlink" title="触发条件"></a>触发条件</h4><p>当 <code>display</code>的值为<code>flex</code>或<code>inline-flex</code>时，其内容建立了一个新的 <strong>弹性格式化上下文</strong> 。</p>
<h4 id="布局规则-2"><a href="#布局规则-2" class="headerlink" title="布局规则"></a>布局规则</h4><ul>
<li>设置为 flex 的容器被渲染为一个块级元素</li>
<li>设置为 inline-flex 的容器则渲染为一个行内元素</li>
<li>弹性容器中的每一个子元素都是一个弹性项目。弹性项目可以是任意数量的。弹性容器外和弹性项目内的一切元素都不受影响。</li>
</ul>
<p><em>FFC 里也可存在匿名盒子！</em></p>
<h3 id="GFC"><a href="#GFC" class="headerlink" title="GFC"></a>GFC</h3><h4 id="条件"><a href="#条件" class="headerlink" title="条件"></a>条件</h4><p>当为一个元素设置为网格布局<code>display: grid/grid-inline</code>的时候，此元素内部将会是一个 <strong>GFC</strong> 。</p>
<h4 id="规则"><a href="#规则" class="headerlink" title="规则"></a>规则</h4><p>通过在网格容器（grid container）上定义网格定义行（grid definition rows）和网格定义列（grid definition columns）属性各在网格项目（grid item）上定义网格行（grid row）和网格列（grid columns）为每一个网格项目（grid item）定义位置和空间。</p>
<h3 id="TFC-Table-FC"><a href="#TFC-Table-FC" class="headerlink" title="TFC (Table-FC)"></a>TFC (Table-FC)</h3><p>In terms of the visual formatting model, a table can behave like a <a target="_blank" rel="noopener" href="https://www.w3.org/TR/CSS22/visuren.html">block-level</a> (for ‘<code>display:table</code>‘)or <a target="_blank" rel="noopener" href="https://www.w3.org/TR/CSS22/visuren.html">inline-level</a> (for <code>&#39;display:inline-table&#39;</code>)element.</p>
<p>The table box establishes a <strong>table formatting context</strong> .</p>
<p>互联网上的文章为什么都没有提到 TFC ？可能是谈到这个点的时候 CSS 规范直接”参考Table章节“了吧……</p>
<p>TFC也存在匿名盒子。例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div style&#x3D;&quot;display: table;&quot;&gt;</span><br><span class="line">    I&#39;m in an anonymous table cell actually.</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>
<p>你看到的文本其实在一个 显式的table盒子 里的 匿名的table-row盒子 里的 匿名的table-cell盒子 里。</p>
<h1 id="The-End"><a href="#The-End" class="headerlink" title="The End"></a>The End</h1><h4 id="Vocabulary"><a href="#Vocabulary" class="headerlink" title="Vocabulary"></a>Vocabulary</h4><p><em>来自 MDN 的整理</em></p>
<blockquote>
<ul>
<li><strong>块</strong>：block，一个抽象的概念，一个块在文档流上占据一个独立的区域，块与块之间在垂直方向上按照顺序依次堆叠。</li>
<li><strong>包含块</strong>：containing block，包含其他盒子的块称为包含块。</li>
<li><strong>盒子</strong>：box，一个抽象的概念，由CSS引擎根据文档中的内容所创建，主要用于文档元素的定位、布局和格式化等用途。盒子与元素并不是一一对应的，有时多个元素会合并生成一个盒子，有时一个元素会生成多个盒子（如匿名盒子）。</li>
<li><strong>块级元素</strong>：block-level element，元素的 <code>display</code> 为 <code>block</code>、<code>list-item</code>、<code>table</code> 时，该元素将成为块级元素。元素是否是块级元素仅是元素本身的属性，并不直接用于格式化上下文的创建或布局。</li>
<li><strong>块级盒子</strong>：block-level box，由块级元素生成。一个块级元素至少会生成一个块级盒子，但也有可能生成多个（例如列表项元素）。</li>
<li><strong>块盒子</strong>：block box，如果一个块级盒子同时也是一个块容器盒子（见下），则称其为块盒子。除具名块盒子之外，还有一类块盒子是匿名的，称为匿名块盒子（Anonymous block box），匿名盒子无法被CSS选择符选中。</li>
<li><strong>块容器盒子</strong>：block container box或block containing box，块容器盒子侧重于当前盒子作为“容器”的这一角色，它不参与当前块的布局和定位，它所描述的仅仅是当前盒子与其后代之间的关系。换句话说，块容器盒子主要用于确定其子元素的定位、布局等。</li>
</ul>
<p>注意：盒子分为“块盒子”和“块级盒子”两种，但元素只有“块级元素”，而没有“块元素”。下面的“行内级元素”也是一样。</p>
<ul>
<li><strong>行内级元素</strong>：inline-level element，<code>display</code> 为 <code>inline</code>、<code>inline-block</code>、<code>inline-table</code> 的元素称为行内级元素。与块级元素一样，元素是否是行内级元素仅是元素本身的属性，并不直接用于格式化上下文的创建或布局。</li>
<li><strong>行内级盒子</strong>：inline-level box，由行内级元素生成。行内级盒子包括行内盒子和原子行内级盒子两种，区别在于该盒子是否参与行内格式化上下文的创建。</li>
<li><strong>行内盒子</strong>：inline box，参与行内格式化上下文创建的行内级盒子称为行内盒子。与块盒子类似，行内盒子也分为具名行内盒子和匿名行内盒子（anonymous inline box）两种。</li>
<li><strong>原子行内级盒子</strong>：atomic inline-level box，不参与行内格式化上下文创建的行内级盒子。原子行内级盒子一开始叫做原子行内盒子（atomic inline box），后被修正。原子行内级盒子的内容不会拆分成多行显示。</li>
</ul>
</blockquote>
<h4 id="看CSS规范的一些注意事项"><a href="#看CSS规范的一些注意事项" class="headerlink" title="看CSS规范的一些注意事项"></a>看CSS规范的一些注意事项</h4><ul>
<li>CSS3开始，CSS规范把各个部分拆成了很多各自独立、并行发展的小规范，就像打补丁。要看本文的点，还是要去看CSS2的规范，因为CSS3规范是没有定义这些点的。</li>
<li>比ECMAScript规范易读。</li>
</ul>
<h4 id="Refer-to"><a href="#Refer-to" class="headerlink" title="Refer to"></a>Refer to</h4><p><a target="_blank" rel="noopener" href="https://www.sitepoint.com/understanding-block-formatting-contexts-in-css/">https://www.sitepoint.com/understanding-block-formatting-contexts-in-css/</a></p>
<p><a target="_blank" rel="noopener" href="https://www.w3.org/TR/css-display-3/#flow-layout">https://www.w3.org/TR/css-display-3/#flow-layout</a></p>
<p><a target="_blank" rel="noopener" href="https://www.w3.org/TR/CSS22/tables.html#model">https://www.w3.org/TR/CSS22/tables.html#model</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Visual_formatting_model">https://developer.mozilla.org/zh-CN/docs/Web/Guide/CSS/Visual_formatting_model</a></p>
<p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000013372963">https://segmentfault.com/a/1190000013372963</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2018/02/18/CSS-%E8%A7%86%E8%A7%89%E6%A0%BC%E5%BC%8F%E5%8C%96%E6%A8%A1%E5%9E%8B-Visual-Formatting-Model/" data-id="cklt0yx5e0001h4ss6oxn5o2u" data-title="CSS 视觉格式化模型 Visual Formatting Model" class="article-share-link">分享</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CSS/" rel="tag">CSS</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2018/03/17/Windows-Git%E4%B8%ADOpenSSH%E6%97%A0ssh-agent%E5%A4%9A%E5%AF%86%E9%92%A5%E9%85%8D%E7%BD%AE%E5%B0%8F%E8%AE%B0/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">前一篇</strong>
      <div class="article-nav-title">
        
          Windows-Git中OpenSSH无ssh-agent多密钥配置小记
        
      </div>
    </a>
  
  
    <a href="/2017/03/01/%E6%8C%87%E5%8D%97%EF%BC%9A%E5%A6%82%E4%BD%95%E8%AE%A9Webpack%E5%8C%85%E5%8A%A0%E8%BD%BD%E5%BE%97%E6%9B%B4%E5%BF%AB/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">后一篇</strong>
      <div class="article-nav-title">指南：如何让Webpack包加载得更快</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/" rel="tag">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Context/" rel="tag">Context</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Flex/" rel="tag">Flex</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Git/" rel="tag">Git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTPS/" rel="tag">HTTPS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Javascript/" rel="tag">Javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Promise/" rel="tag">Promise</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/React/" rel="tag">React</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSH/" rel="tag">SSH</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Webpack/" rel="tag">Webpack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blend-mode/" rel="tag">blend mode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mask/" rel="tag">mask</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85/" rel="tag">发布订阅</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AF%86%E7%A0%81%E5%AD%A6/" rel="tag">密码学</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/" rel="tag">开发工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B7%B7%E5%90%88%E6%A8%A1%E5%BC%8F/" rel="tag">混合模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%95%82%E7%A9%BA/" rel="tag">镂空</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/CSS/" style="font-size: 20px;">CSS</a> <a href="/tags/Context/" style="font-size: 10px;">Context</a> <a href="/tags/Flex/" style="font-size: 10px;">Flex</a> <a href="/tags/Git/" style="font-size: 20px;">Git</a> <a href="/tags/HTTPS/" style="font-size: 10px;">HTTPS</a> <a href="/tags/Javascript/" style="font-size: 10px;">Javascript</a> <a href="/tags/Promise/" style="font-size: 10px;">Promise</a> <a href="/tags/React/" style="font-size: 10px;">React</a> <a href="/tags/SSH/" style="font-size: 10px;">SSH</a> <a href="/tags/Webpack/" style="font-size: 10px;">Webpack</a> <a href="/tags/blend-mode/" style="font-size: 10px;">blend mode</a> <a href="/tags/mask/" style="font-size: 10px;">mask</a> <a href="/tags/%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85/" style="font-size: 10px;">发布订阅</a> <a href="/tags/%E5%AF%86%E7%A0%81%E5%AD%A6/" style="font-size: 10px;">密码学</a> <a href="/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/" style="font-size: 10px;">开发工具</a> <a href="/tags/%E6%B7%B7%E5%90%88%E6%A8%A1%E5%BC%8F/" style="font-size: 10px;">混合模式</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 10px;">设计模式</a> <a href="/tags/%E9%95%82%E7%A9%BA/" style="font-size: 10px;">镂空</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">三月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">五月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">三月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/03/03/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2019/02/22/%E7%94%A8%E7%BA%AFCSS%E5%AE%9E%E7%8E%B0%E9%95%82%E7%A9%BA%E6%95%88%E6%9E%9C/">用纯 CSS 实现镂空效果</a>
          </li>
        
          <li>
            <a href="/2019/01/11/%E5%89%96%E6%9E%90-HTTPS-%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF/">剖析 HTTPS 的设计思路</a>
          </li>
        
          <li>
            <a href="/2018/11/18/Pro-Git-Reading-Note-Part-II/">Pro Git Reading Note Part II</a>
          </li>
        
          <li>
            <a href="/2018/10/18/Pro-Git-Reading-Note-Part-I/">Pro Git Reading Note Part I</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 Cattle<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>